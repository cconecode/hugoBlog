<!doctype html>
<html lang="zh-CN">
<head>
    
    <meta charset="utf-8">
    <meta name="generator" content="Hugo 0.60.1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Dart使用 | 悉达多｜PainMaker</title>
    <meta property="og:title" content="Dart使用 - 悉达多｜PainMaker">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content="2019-12-20T14:12:06&#43;08:00">
        
        
    <meta property="article:modified_time" content="2019-12-20T14:12:06&#43;08:00">
        
    <meta name="Keywords" content="">
    <meta name="description" content="Dart使用">
        
    <meta name="author" content="悉达多">
    <meta property="og:url" content="http://superchun.cn/posts/Dart%E4%BD%BF%E7%94%A8/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="/css/normalize.css">
    
        
    
    <link rel="stylesheet" href="/css/style.css">
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    


    
    
</head>

<body>
<header id="header" class="clearfix">
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-153875253-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-153875253-1');
    </script>
    <link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/9.15.10/styles/monokai-sublime.min.css">
    <script src="https://cdn.staticfile.org/highlight.js/9.15.10/highlight.min.js"></script>
    <script src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/dart.min.js"></script>
    <script>
        hljs.initHighlightingOnLoad();
    </script>
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                <a id="logo" href="http://superchun.cn">
                        悉达多｜PainMaker
                    </a>  
                <p class="description">知也者，所以知也，而不必知</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="http://superchun.cn">首页</a> 
                    <a  href="http://superchun.cn/archives/" title="归档">归档</a> 
                    <a  href="http://superchun.cn/about/" title="关于">关于</a> 
                </nav>
            </div>
        </div>
    </div>
</header>

<div id="body">
        
        
    <div class="container">
        <div class="col-group">

            <div class="col-8" id="main">
                <div class="res-cons">
                    <article class="post">
                        <header>
                            <h1 class="post-title">Dart使用</h1>
                        </header>
                        <date class="post-meta meta-date">
                            2019年12月20日
                        </date>
                        
                        
                        <div class="post-meta">
                            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span> 阅读</span></span>
                        </div>
                        
                        
                        <div class="post-content">
                            <p>Dart 是 Google 开发的一门跨平台的客户端优化语言，Flutter 也是采用 Dart 进行开发的。下面结合 <a href="https://dart.dev/guides/language/language-tour">Dart 官方文档</a>对 Dart 进行一个简单的学习和了解。</p>
<h2 id="heading">重要概念</h2>
<p>在学习 Dart 之前，有些关于 Dart 语言的概念需要牢记在心：</p>
<ul>
<li>所有可以放进变量中的东西都是<strong>对象</strong>，所有对象都是<strong>类</strong>的一个实例。包括数字、函数和 null，都是对象。所有对象都继承自 <code>Object</code> 类。</li>
<li>尽管 Dart 是强类型语言，但是类型标注是可选的，因为 Dart 可以进行类型推断。比如，数字可以推断为 <code>Int</code> 类型，当你想明确地说没有类型时，使用特殊类型 <code>dynamic</code>。</li>
<li>Dart 支持泛型，比如 <code>List&lt;Int&gt;</code>(一个整数列表) 或 <code>List&lt;dynamic&gt;</code>(一个可以是任何类型对象的列表)。</li>
<li>Dart 支持顶层函数，例如 <code>main()</code>，以及与类或对象相关的函数，分别是静态函数和实例函数。<em>顶层函数是指不属于任何类的函数</em>。</li>
<li>Dart 支持顶层变量，以及与类和对象相关的变量，分别是静态变量和实例变量。实例变量有时候也称为字段或属性。</li>
<li>Dart 没有 <code>public，protected，private</code> 等关键字，如果标志符以下划线 <code>_</code> 开头，那么对于它的 library，它是 <code>private</code>的。</li>
<li>标志符可以以小写字母或下划线开头，然后是这些字符加数字的任意组合。</li>
<li>Dart 同时拥有表达式（有运行时值）和语句（没有运行时值）。</li>
</ul>
<h2 id="heading1">关键字</h2>
<p>下面的表列出了 Dart 中的主要关键字：</p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center"></th>
<th align="center"></th>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">abstract</td>
<td align="center">dynamic</td>
<td align="center">implements</td>
<td align="center">show</td>
</tr>
<tr>
<td align="center">as</td>
<td align="center">else</td>
<td align="center">import</td>
<td align="center">static</td>
</tr>
<tr>
<td align="center">assert</td>
<td align="center">enum</td>
<td align="center">in</td>
<td align="center">super</td>
</tr>
<tr>
<td align="center">async</td>
<td align="center">export</td>
<td align="center">interface</td>
<td align="center">switch</td>
</tr>
<tr>
<td align="center">await</td>
<td align="center">extends</td>
<td align="center">is</td>
<td align="center">sync</td>
</tr>
<tr>
<td align="center">break</td>
<td align="center">external</td>
<td align="center">library</td>
<td align="center">this</td>
</tr>
<tr>
<td align="center">case</td>
<td align="center">factory</td>
<td align="center">mixin</td>
<td align="center">throw</td>
</tr>
<tr>
<td align="center">catch</td>
<td align="center">false</td>
<td align="center">new</td>
<td align="center">true</td>
</tr>
<tr>
<td align="center">class</td>
<td align="center">final</td>
<td align="center">null</td>
<td align="center">try</td>
</tr>
<tr>
<td align="center">const</td>
<td align="center">finally</td>
<td align="center">on</td>
<td align="center">typedef</td>
</tr>
<tr>
<td align="center">continue</td>
<td align="center">for</td>
<td align="center">operator</td>
<td align="center">var</td>
</tr>
<tr>
<td align="center">convariant</td>
<td align="center">Function</td>
<td align="center">part</td>
<td align="center">void</td>
</tr>
<tr>
<td align="center">default</td>
<td align="center">get</td>
<td align="center">rethrow</td>
<td align="center">while</td>
</tr>
<tr>
<td align="center">deferred</td>
<td align="center">hide</td>
<td align="center">return</td>
<td align="center">with</td>
</tr>
<tr>
<td align="center">do</td>
<td align="center">if</td>
<td align="center">set</td>
<td align="center">yield</td>
</tr>
</tbody>
</table>
<p>避免使用以上关键字作为标识符。如果有必要的，下面这些关键字可以称为标识符：</p>
<ul>
<li><code>show</code>, <code>async</code>, <code>sync</code>, <code>on</code>, <code>hide</code> 等这些为<strong>上下文关键字</strong>，仅在特定位置才有意义。所以它们在任何位置都是有效的标识符。</li>
<li><code>abstract</code>, <code>dynamic</code>, <code>implements</code>, <code>as</code>, <code>import</code>, <code>static</code>, <code>export</code>, <code>interface</code>, <code>external</code>, <code>library</code>, <code>factory</code>, <code>mixin</code>, <code>typedef</code>, <code>operator</code>, <code>covariant</code>, <code>Function</code>, <code>part</code>,  <code>get</code>, <code>deferred</code>, <code>set</code> 等是<strong>内置标识符</strong>，为了简化 Javascript 代码转换为 Dart 代码的任务。这些关键字在大多数地方是有效的，但它们不能被用于类名、类型名或 import 前缀。</li>
<li><code>await</code>, <code>yield</code> 是 Dart 1.0 版本之后添加的与异步支持相关的更新的有限保留字，不能再任何标有 <code>async</code>, <code>async*</code> 或 <code>sync*</code> 的函数体中使用它们作为标识符。</li>
</ul>
<p>表中的其他关键字为保留字，不能作为标识符。</p>
<h2 id="heading2">变量</h2>
<p>下面是一个创建和初始化变量的例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">var</span> name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">CC</span><span style="color:#e6db74">&#39;</span>;
</code></pre></div><p>变量存储引用，名为 <code>name</code> 的变量包含了对值为 <code>CC</code> 的 <code>String</code>对象的引用。</p>
<p><code>name</code> 变量的类型推断为 <code>String</code>，但可以通过指定其类型来改变。如果对象不限于单一类型，可以指定为 <code>Object</code> 或 <code>dynamic</code> 类型。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">dynamic</span> name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">CC</span><span style="color:#e6db74">&#39;</span>;
</code></pre></div><p>另一个选择是显式地声明类型：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">String</span> name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">CC</span><span style="color:#e6db74">&#39;</span>;
</code></pre></div><h3 id="heading3">默认值</h3>
<p>未初始化的变量有一个初始值为 <code>null</code>。尽管变量为数值类型，其初始也为 null，因为所有东西都是对象。</p>
<h3 id="final--const">final 和 const</h3>
<p>如果从未想改变变量，那么使用 <code>final</code> 或 <code>const</code> 代替 <code>var</code>。一个 final 变量只能被 set 一次，一个 const 变量是一个编译期常量。一个 final 顶层变量或类变量在首次使用时被初始化。</p>
<blockquote>
<p>实例变量可以为 final 但不能为 const，final 实例变量必须在构造体开始之前初始化。</p>
</blockquote>
<p>对于想成为<strong>编译时常量</strong>的变量使用 <code>const</code>，如果 const 变量是类及的，使用 <code>static const</code>。</p>
<p><code>const</code> 关键字不仅用于声明常量变量，还可以用于创建常量值，以及声明创建常量的构造函数。任何变量都可以用于常量值。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">var</span> foo <span style="color:#f92672">=</span> <span style="color:#66d9ef">const</span> [];
<span style="color:#66d9ef">final</span> bar <span style="color:#f92672">=</span> <span style="color:#66d9ef">const</span> [];
<span style="color:#66d9ef">const</span> baz <span style="color:#f92672">=</span> [];
</code></pre></div><p>可以改变非 final、非 const 变量的值，甚至它拥有 const 值：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart">foo <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>];
</code></pre></div><p>不能改变 const 变量的值：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart">baz <span style="color:#f92672">=</span> [<span style="color:#ae81ff">42</span>];
</code></pre></div><h2 id="heading4">内置类型</h2>
<p>Dart 语言支持以下类型：</p>
<ul>
<li>numbers</li>
<li>strings</li>
<li>booleans</li>
<li>lists</li>
<li>sets</li>
<li>maps</li>
<li>runes（用于在字符串中表示 Unicode 字符）</li>
<li>symbols</li>
</ul>
<p>因为 Dart 中所有的变量引用了一个对象——类的实例，所以经常可以使用构造函数初始化变量。一些内置类型有它们自己的构造函数。</p>
<h3 id="numbers">Numbers</h3>
<p>Dart 中的 number 有两种形式：</p>
<p><strong>int</strong></p>
<p>整数值不超过 64 位，取决于所基于的平台。在 Dart VM 中，值可以从 $-2^{63}$ 到 $2^{63}-1$。编译为 Javascript 的 Dart 使用 Javascript numbers，取值范围从 $-2^{53}$ 到 $2^{53}-1$。</p>
<p><strong>double</strong></p>
<p>64 位的浮点数，IEEE 754 标准中所规定的。</p>
<p><code>int</code> 和 <code>double</code> 都是 <code>num</code> 的子类型。num 类型包括基本操作，例如 +, -, / 和 *，在其他方法中，也可以找到 <code>abs()</code>, <code>ceil()</code> 和 <code>floor</code>。如果 num 和它的子类型没有你想要的方法，<code>dart:math</code> 库中可能有。</p>
<p>string 与 number 互转：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#75715e">// String -&gt; int
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> one <span style="color:#f92672">=</span> <span style="color:#66d9ef">int</span>.parse(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">1</span><span style="color:#e6db74">&#39;</span>);

<span style="color:#75715e">// String -&gt; double
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> onePointOne <span style="color:#f92672">=</span> <span style="color:#66d9ef">double</span>.parse(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">1.1</span><span style="color:#e6db74">&#39;</span>);

<span style="color:#75715e">// int -&gt; String
</span><span style="color:#75715e"></span><span style="color:#66d9ef">String</span> oneAsString <span style="color:#f92672">=</span> <span style="color:#ae81ff">1.</span>toString();

<span style="color:#75715e">// double -&gt; String
</span><span style="color:#75715e"></span><span style="color:#66d9ef">String</span> piAsString <span style="color:#f92672">=</span> <span style="color:#ae81ff">3.14</span>.toStringAsFixed(<span style="color:#ae81ff">2</span>);
</code></pre></div><p>int 类型有传统的按位位移、&amp;、｜操作：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart">(<span style="color:#ae81ff">3</span> <span style="color:#f92672">&lt;</span><span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span> <span style="color:#75715e">// 0011 &lt;&lt; 1 == 0110
</span><span style="color:#75715e"></span>(<span style="color:#ae81ff">3</span> <span style="color:#f92672">&gt;</span><span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#75715e">// 0011 &gt;&gt; 1 == 0001
</span><span style="color:#75715e"></span>(<span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">4</span>) <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#ae81ff">7</span> <span style="color:#75715e">// 0011 || 0100 = 0111
</span></code></pre></div><h3 id="strings">Strings</h3>
<p>Dart  中的 string 是 UTF-16 码元的序列，可以用单引号或者双引号创建一个字符串：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">var</span> s1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">string1</span><span style="color:#e6db74">&#39;</span>;
<span style="color:#66d9ef">var</span> s2 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">string2</span><span style="color:#e6db74">&#34;</span>;
</code></pre></div><p>可以用 <code>${表达式} </code>将表达式的值放在字符串中，如果表达式是一个标识符，可以省略 {}。为了获取与对象相应的字符串，Dart 调用对象的 <code>toString()</code> 方法。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">var</span> s <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">string expression</span><span style="color:#e6db74">&#39;</span>;
<span style="color:#66d9ef">var</span> s1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Dart has </span><span style="color:#e6db74">$</span>s<span style="color:#e6db74">&#39;</span>;
<span style="color:#66d9ef">var</span> s2 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">s.upper = </span><span style="color:#e6db74">${</span>s.toUpperCase()<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39;</span>;
</code></pre></div><p>可以使用 + 将两个字符串串联起来</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">var</span> s <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">The operator + </span><span style="color:#e6db74">&#39;</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">is fine</span><span style="color:#e6db74">&#39;</span>;
</code></pre></div><h3 id="lists">Lists</h3>
<p>在 Dart 中，数组是个 List 对象，所以大多数人称它为 lists。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">var</span> list <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>];
</code></pre></div><p>创建一个编译期常量 list：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">var</span> constantList <span style="color:#f92672">=</span> <span style="color:#66d9ef">const</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>];
<span style="color:#75715e">// constantList[1] = 1;  // error
</span></code></pre></div><p>Dart 2.3 介绍了<strong>展开操作符</strong> <code>…</code> 和<strong>可空的展开操作符</strong> <code>…?</code>，为将多个元素插入到集合中提供了简洁的方式。</p>
<p>比如可以使用 <code>...</code> 将一个 list 中的所有元素插入到另一个 list 中：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">var</span> list <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>];
<span style="color:#66d9ef">var</span> list2 <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>, ...list];
<span style="color:#75715e">// list2 == [0, 1, 2, 3];
</span></code></pre></div><p>如果展开操作符右边的表达式可能为 null，为了避免异常，可以使用可空的展开操作符 <code>...?</code>：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">var</span> list;
<span style="color:#66d9ef">var</span> list2 <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>, ...<span style="color:#f92672">?</span>list];
<span style="color:#75715e">// list2 == [0];
</span></code></pre></div><p>Dart 2.3 也介绍了<strong>集合 if</strong> 和<strong>集合 for</strong>，可以通过 <code>if</code> 和 <code>for</code> 来构建集合。</p>
<p>下面是一个使用<strong>集合 if</strong> 创建有三个或四个元素的 list 的例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">var</span> list <span style="color:#f92672">=</span> [
	<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Home</span><span style="color:#e6db74">&#39;</span>,
	<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Furniture</span><span style="color:#e6db74">&#39;</span>,
	<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Plants</span><span style="color:#e6db74">&#39;</span>,
	<span style="color:#66d9ef">if</span> (condition <span style="color:#66d9ef">is</span> <span style="color:#66d9ef">true</span>) <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Outlet</span><span style="color:#e6db74">&#39;</span>
];
</code></pre></div><p>下面是使用<strong>集合 for</strong> 将列表中元素添加到另一个元素之前对其进行操作：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">var</span> listOfInts <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>];
<span style="color:#66d9ef">var</span> listOfStrings <span style="color:#f92672">=</span> [
	<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">#0</span><span style="color:#e6db74">&#39;</span>,
	<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">var</span> i <span style="color:#66d9ef">in</span> listOfInts) <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">#</span><span style="color:#e6db74">$</span>i<span style="color:#e6db74">&#39;</span>
];
<span style="color:#75715e">// listOfStrings = [&#39;#0&#39;, &#39;#1&#39;, &#39;#2&#39;, &#39;#3&#39;]
</span></code></pre></div><h3 id="sets">Sets</h3>
<p>Dart 中的 set 是一个无序的每个元素都是独一无二的集合。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">var</span> names <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Alice</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Bob</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Celina</span><span style="color:#e6db74">&#34;</span>};
</code></pre></div><p>在类型参数前使用 {}，或将 {} 分配给 Set 类型的变量，用于创建空集合：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">var</span> names <span style="color:#f92672">=</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">String</span><span style="color:#f92672">&gt;</span>{};
Set<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">String</span><span style="color:#f92672">&gt;</span> names <span style="color:#f92672">=</span> {};
<span style="color:#75715e">// var names = {}; 用于创建 map 而非 set
</span></code></pre></div><p>使用 <code>add()</code> 或 <code>addAll()</code> 方法将元素添加到 set 中，用 <code>length</code> 获取 set 中元素的数量：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">var</span> elements <span style="color:#f92672">=</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">String</span><span style="color:#f92672">&gt;</span>{};
elements.add(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Elia</span><span style="color:#e6db74">&#39;</span>);
elements.addAll(names);
elements.length <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>;
</code></pre></div><p>Dart  2.3 之后，set 也支持展开操作符和可空的展开操作符。</p>
<h3 id="maps">Maps</h3>
<p>map 是一个键值对对象，key 和 value 都可以是任意类型。key 只能出现一次，value 可以多次使用。</p>
<p>使用 map 字面量创建 map：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">var</span> fruits <span style="color:#f92672">=</span> {
	<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">first</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">banana</span><span style="color:#e6db74">&#39;</span>,
	<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">second</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">apple</span><span style="color:#e6db74">&#39;</span>,
	<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">fifth</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">orange</span><span style="color:#e6db74">&#39;</span>
};

<span style="color:#66d9ef">var</span> months <span style="color:#f92672">=</span> {
	<span style="color:#ae81ff">2</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Feb</span><span style="color:#e6db74">&#39;</span>,
	<span style="color:#ae81ff">10</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Oct</span><span style="color:#e6db74">&#39;</span>,
	<span style="color:#ae81ff">12</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Dec</span><span style="color:#e6db74">&#39;</span>
};
</code></pre></div><p>使用 Map 构造函数创建 map：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">var</span> fruits <span style="color:#f92672">=</span> Map();
fruits[<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">first</span><span style="color:#e6db74">&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">banana</span><span style="color:#e6db74">&#39;</span>;
fruits[<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">second</span><span style="color:#e6db74">&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">apple</span><span style="color:#e6db74">&#39;</span>;
fruits[<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">fifth</span><span style="color:#e6db74">&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">orange</span><span style="color:#e6db74">&#39;</span>;

<span style="color:#66d9ef">var</span> months <span style="color:#f92672">=</span> Map();
months[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Feb</span><span style="color:#e6db74">&#39;</span>;
months[<span style="color:#ae81ff">10</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Oct</span><span style="color:#e6db74">&#39;</span>;
months[<span style="color:#ae81ff">12</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Dec</span><span style="color:#e6db74">&#39;</span>;
</code></pre></div><p>Dart 2.3 之后，map 也支持展开操作符和可空的展开操作符。</p>
<h2 id="functions">Functions</h2>
<p>Dart 是一门真面向对象语言，所以连函数都是一个对象，而且拥有类型——Function。这也就意味着函数可以分配给一个变量或者在另一个函数中作为参数传递。</p>
<p>下面是一个函数实现的例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">bool</span> haveFruit(<span style="color:#66d9ef">String</span> index) {
	<span style="color:#66d9ef">return</span> _fruits[index] <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>;
}
</code></pre></div><p>省略返回类型也是可行的：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart">haveFruit(<span style="color:#66d9ef">String</span> index) {
	<span style="color:#66d9ef">return</span> _fruits[index] <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>;
}
</code></pre></div><p>如果函数只包含一个表达式，可以使用简写方式：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">bool</span> haveFruit(<span style="color:#66d9ef">String</span> index) <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> _fruits[index] <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>;
</code></pre></div><p><code>=&gt; 表达式</code> 是 <code>{return 表达式; }</code> 的简写，<code>=&gt;</code> 符号有时也称为箭头语法。</p>
<p>函数可以有两种类型的参数：必要的和可选的。首先列出必要的参数，然后列出所有可选参数。可选参数可以是命名参数或 位置参数。</p>
<h3 id="heading5">可选参数</h3>
<p>可选参数可以是命名参数或位置参数，都不能同时是。</p>
<h4 id="heading6">命名参数</h4>
<p>当调用一个函数时，可以 <code>paramName: value</code> 的形式指定命名参数：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart">enableFlags(bold: <span style="color:#66d9ef">true</span>, hidden: <span style="color:#66d9ef">false</span>);
</code></pre></div><p>当定义函数时，使用 <code>{param1, param2, ...}</code> 的形式指定命名参数：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">void</span> enableFlags({<span style="color:#66d9ef">bool</span> bold, <span style="color:#66d9ef">bool</span> hidden}) {...}
</code></pre></div><p>虽然命名参数是可选参数的一种，但仍可以使用 <code>@required</code> 来标注它们，表示该参数是强制性的，即用户必须为这个参数提供值。</p>
<h4 id="heading7">位置参数</h4>
<p>使用 <code>[]</code> 包裹函数的一组参数，以标记它们是可选位置参数：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">String</span> say(<span style="color:#66d9ef">String</span> from, <span style="color:#66d9ef">String</span> msg, [<span style="color:#66d9ef">String</span> device]) {
	<span style="color:#66d9ef">var</span> result <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">$</span>from<span style="color:#e6db74"> says </span><span style="color:#e6db74">$</span>msg<span style="color:#e6db74">&#39;</span>;
	<span style="color:#66d9ef">if</span> (device <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>) {
		result <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">$</span>result<span style="color:#e6db74"> with a </span><span style="color:#e6db74">$</span>device<span style="color:#e6db74">&#39;</span>;
	}
	<span style="color:#66d9ef">return</span> result;
}
</code></pre></div><h3 id="heading8">默认参数值</h3>
<p>函数可以使用 <code>=</code> 来为命名参数和位置参数定义默认值，默认值必须为编译期常量。如果没有默认值提供，那么默认值为 <code>null</code>。</p>
<p>下面是一个为命名参数设置默认值的例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">void</span> enableFlags({<span style="color:#66d9ef">bool</span> bold <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">bool</span> hidden <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>}) {...}

<span style="color:#75715e">// bold 为 true，hidden 为 false
</span><span style="color:#75715e"></span>enableFlags(bold: <span style="color:#66d9ef">true</span>)
</code></pre></div><p>下面是一个为位置参数设置默认值的例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">String</span> say(<span style="color:#66d9ef">String</span> from, <span style="color:#66d9ef">String</span> msg, [<span style="color:#66d9ef">String</span> device <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">iPhone</span><span style="color:#e6db74">&#39;</span>, <span style="color:#66d9ef">String</span> mood]) {
	<span style="color:#66d9ef">var</span> result <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">$</span>from<span style="color:#e6db74"> says </span><span style="color:#e6db74">$</span>msg<span style="color:#e6db74">&#39;</span>;
	<span style="color:#66d9ef">if</span> (device <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>) {
		result <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">$</span>result<span style="color:#e6db74"> with a </span><span style="color:#e6db74">$</span>device<span style="color:#e6db74">&#39;</span>;
	}
	<span style="color:#66d9ef">if</span> (mod <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>) {
		result <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">$</span>result<span style="color:#e6db74"> (in a </span><span style="color:#e6db74">$</span>mod<span style="color:#e6db74"> mod)</span><span style="color:#e6db74">&#39;</span>;
	}
	<span style="color:#66d9ef">return</span> result;
}
</code></pre></div><p>也可以将 lists 或 maps 作为默认值传递：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">void</span> doStuff({List<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> list <span style="color:#f92672">=</span> <span style="color:#66d9ef">const</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>], 
							Map<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">String</span>, <span style="color:#66d9ef">String</span><span style="color:#f92672">&gt;</span> gifts <span style="color:#f92672">=</span> <span style="color:#66d9ef">const</span> {
								<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">first</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">paper</span><span style="color:#e6db74">&#39;</span>,
								<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">second</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">cotton</span><span style="color:#e6db74">&#39;</span>,
								<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">third</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">leather</span><span style="color:#e6db74">&#39;</span>
							}}) {
	print(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">list: </span><span style="color:#e6db74">$</span>list<span style="color:#e6db74">&#39;</span>);
	print(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">gifts: </span><span style="color:#e6db74">$</span>gifts<span style="color:#e6db74">&#39;</span>);
}
</code></pre></div><h3 id="main-">main() 函数</h3>
<p>每个 app 必须要有顶层 <code>main()</code> 函数，用作 app 的入口点。<code>main()</code> 函数的返回值为 <code>void</code> 并且有一个可选 <code>List&lt;String&gt;</code> 参数作为参数。</p>
<h3 id="heading9">函数作为第一类对象</h3>
<p>可以将函数作为参数传递给另一个函数：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">void</span> printElement(<span style="color:#66d9ef">int</span> element) {
	print(element);
}

<span style="color:#66d9ef">var</span> list <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>];
list.forEach(printElement);
</code></pre></div><h3 id="heading10">匿名函数</h3>
<p>大多数函数都有名字，例如 <code>main()</code> 或 <code>printElement()</code>。也可以创建一个没有名字的函数，称为<strong>匿名函数</strong>，或者有时是 <strong>lambda</strong> 或<strong>闭包</strong>。</p>
<p>匿名函数跟有名字的函数看起来差不多，没有或多个参数，用逗号分隔，可选类型标注。</p>
<p>下面的代码块包含着函数主体：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart">([[Type] params1[, ...]]) {
	codeBlock;
};
</code></pre></div><p>下面的例子定义了一个有一个无类型参数 <code>item</code> 的匿名函数：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">var</span> list <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">apples</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">bananas</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">oranges</span><span style="color:#e6db74">&#39;</span>];
list.forEach((item)) {
	print(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">${</span>list.indexOf(item)<span style="color:#e6db74">}</span><span style="color:#e6db74">: </span><span style="color:#e6db74">$</span>item<span style="color:#e6db74">&#39;</span>);
}
</code></pre></div><p>如果函数只包含了一条语句，那么可以使用箭头符号简化：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart">list.forEach((item) <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> print(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">${</span>list.indexOf(item)<span style="color:#e6db74">}</span><span style="color:#e6db74">: </span><span style="color:#e6db74">$</span>item<span style="color:#e6db74">&#39;</span>));
</code></pre></div><h2 id="heading11">异常</h2>
<p>Dart 代码可以抛出和捕获异常，与 Java 相反，Dart 中所有的异常都是未检查异常。方法不声明它们可能引发什么异常，并且不需要捕获任何异常。</p>
<p>Dart 提供了 <code>Exception</code> 和  <code>Error</code> 类型，以及许多预定义的子类型，也可以自定义自己的异常。Dart 程序可以捕获任何 non-null 对象作为异常，而不仅仅是 Exception 和 Error 对象。</p>
<h3 id="throw">Throw</h3>
<p>下面是一个抛出或引发异常的例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">throw</span> FormatException(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Expected at least 1 section</span><span style="color:#e6db74">&#39;</span>);
</code></pre></div><p>也可以抛出任意对象：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">throw</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Out of llamas!</span><span style="color:#e6db74">&#39;</span>;
</code></pre></div><p>因为抛出异常是一个表达式，所以可以使用 =&gt; 语句，以及允许表达式的其他任何地方：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"> <span style="color:#66d9ef">void</span> distanceTo(Point other) <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">throw</span> UnimplementedError();
</code></pre></div><h3 id="catch">Catch</h3>
<p>捕获异常会阻止该异常传播，除非再次抛出该异常，捕获异常给了用户一个处理它的机会：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">try</span> {
	breedMoreLlamas();
}on OutOfLlamasException {
	buyMoreLlamas();
}
</code></pre></div><p>为了处理可能引发一种以上类型的异常的代码，可以指定多个 catch 子句。第一个与抛出的对象类型匹配的 catch 子句处理异常，如果 catch 子句未指定类型，则该子句可以处理任何类型的抛出对象：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">try</span> {
	breedMoreLlamas();
}on OutOfLlamasException {
	<span style="color:#75715e">// 一个指定的异常
</span><span style="color:#75715e"></span>  buyMoreLlamas();
}on Exception <span style="color:#66d9ef">catch</span> (e) {
  <span style="color:#75715e">// 其他任何例外异常
</span><span style="color:#75715e"></span>  print(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Unknown exception </span><span style="color:#e6db74">$</span>e<span style="color:#e6db74">&#39;</span>);
}<span style="color:#66d9ef">catch</span> (e) {
  <span style="color:#75715e">// 未指定类型，处理所有
</span><span style="color:#75715e"></span> 	print(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Something really unknow: </span><span style="color:#e6db74">$</span>e<span style="color:#e6db74">&#39;</span>);
}
</code></pre></div><p>在上面的代码中，可以使用 <code>on</code>、 <code>catch</code> 或者同时使用。当需要指定异常类型时，使用 <code>on</code> ；当异常处理需要异常对象时，使用 <code>catch</code>。</p>
<p>可以给 <code>catch()</code> 指定一个或两个参数。第一个参数是被抛出的异常，第二个参数是堆栈跟踪。</p>
<p>为了部分地处理异常，同时允许其传播，使用 <code>rethrow</code> 关键字：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">void</span> misbehave() {
  <span style="color:#66d9ef">try</span> {
    <span style="color:#66d9ef">dynamic</span> foo <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
    print(foo<span style="color:#f92672">+</span><span style="color:#f92672">+</span>); <span style="color:#75715e">// error
</span><span style="color:#75715e"></span>  } <span style="color:#66d9ef">catch</span> (e) {
    print(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">misbehave() partially handled </span><span style="color:#e6db74">${</span>e.runttimeType<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39;</span>);
    rethrow;
  }
}

<span style="color:#66d9ef">void</span> main() {
  <span style="color:#66d9ef">try</span> {
    misbehave();
  } <span style="color:#66d9ef">catch</span> (e) {
    print(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">main() finished handling </span><span style="color:#e6db74">${</span>e.runtimeType<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39;</span>);
  }
}
</code></pre></div><h3 id="finally">finally</h3>
<p>为了确保无论是否有异常抛出，一些代码都会执行，使用 <code>finally</code> 子句。如果没有 catch 子句与异常匹配，那么该异常会在 <code>finally</code> 子句执行完之后传播。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">try</span> {
  breedMoreLlamas();
} <span style="color:#66d9ef">finally</span> {
  <span style="color:#75715e">// 总是会被执行，即使有异常抛出
</span><span style="color:#75715e"></span>  cleanLlamaStalls();
}
</code></pre></div><p>finally 子句会在任意 catch 子句之后执行：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">try</span> {
  breedMoreLlamas();
} <span style="color:#66d9ef">catch</span> (e) {
  print(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Error: </span><span style="color:#e6db74">$</span>e<span style="color:#e6db74">&#39;</span>); <span style="color:#75715e">// 先处理异常
</span><span style="color:#75715e"></span>} <span style="color:#66d9ef">finally</span> {
  cleanLlamStalls(); <span style="color:#75715e">// 再执行
</span><span style="color:#75715e"></span>}
</code></pre></div><h2 id="heading12">类</h2>
<p>Dart 是一门具有类和混合继承的面向对象语言。所有的对象都是一个类的一个实例，并且所有的类都来自 <code>Object</code>。混合继承意味着即使每一个类都有明确的父类，一个类主体可以在多个类层次结构中重用。<code>Extension</code>方法 是一种不需要改变类或创建子类就能给类添加功能的方式。</p>
<h3 id="heading13">使用类成员</h3>
<p>对象拥有成员，包括函数和数据。当调用一个方法时，是在对象上调用它，该方法可以访问该对象的函数和数据。</p>
<p>使用 <code>.</code> 来引用一个实例变量或方法：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">var</span> p <span style="color:#f92672">=</span> Point(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">2</span>);

p.y <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>; <span style="color:#75715e">// 给实例变量 y 设置值
</span><span style="color:#75715e"></span><span style="color:#66d9ef">num</span> distance <span style="color:#f92672">=</span> p.distanceTo(Point(<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">4</span>)); <span style="color:#75715e">// 调用 distanceTo() 方法
</span></code></pre></div><p>当最左边的操作数为 null 时，使用 <code>?.</code> 代替 <code>.</code>  来避免异常：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart">p<span style="color:#f92672">?</span>.y <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>; <span style="color:#75715e">//如果 p 不为 null，那么设置它的 y 为 4
</span></code></pre></div><h3 id="heading14">使用构造函数</h3>
<p>可以使用构造函数创建对象，构造函数的名字可以是 <code>ClassName</code> 或 <code>ClassName.identifier</code>。</p>
<p>例如下面的代码，使用了 <code>Point()</code> 和 <code>Point.fromJson()</code> 构造函数创建 <code>Point</code> 对象：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">var</span> p1 <span style="color:#f92672">=</span> Point(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">2</span>);
<span style="color:#66d9ef">var</span> p2 <span style="color:#f92672">=</span> Point.fromJson({<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">x</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">y</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>});
</code></pre></div><p>下面的代码有着同样的效果，但在构造函数名字前使用了可选的 <code>new</code> 关键字，在 Dart 2 之后，new 关键字变成了可选的：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">var</span> p1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Point(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">2</span>);
<span style="color:#66d9ef">var</span> p2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Point.fromJson({<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">x</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">y</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>});
</code></pre></div><p>一些类提供了<strong>常量构造函数</strong>，在构造函数名字前加上 <code>const</code> 关键字，就可以使用常量构造函数创建编译期常量：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">var</span> p <span style="color:#f92672">=</span> <span style="color:#66d9ef">const</span> ImmutablePoint(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">2</span>);
</code></pre></div><p>在常量上下文中，可以在构造函数或字面量前面省略 <code>const</code>。下面的代码创建了一个 const map：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">const</span> pointAndLine <span style="color:#f92672">=</span> <span style="color:#66d9ef">const</span> {
	<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">point</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">const</span> [<span style="color:#66d9ef">const</span> ImmutablePoint(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)],
	<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">line</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">const</span> [<span style="color:#66d9ef">const</span> ImmutablePoint(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">10</span>), <span style="color:#66d9ef">const</span> ImmutablePoint(<span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">11</span>)],
};
</code></pre></div><p>也可以省略除了第一个 <code>const</code> 关键字之外所有其他的 const：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">const</span> pointAndLine <span style="color:#f92672">=</span> {
	<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">point</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">:</span> [ImmutablePoint(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)],
	<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">line</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">:</span> [ImmutablePoint(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">10</span>), ImmutablePoint(<span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">11</span>)],
};
</code></pre></div><h3 id="heading15">获取一个对象的类型</h3>
<p>可以使用 Object 的  <code>runtimeType</code> 属性来获取一个对象的运行时类型，这个属性返回一个 <code>Type</code> 对象：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart">print(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">The type of a is </span><span style="color:#e6db74">${</span>a.runtimeType<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39;</span>);
</code></pre></div><h3 id="heading16">实例变量</h3>
<p>下面的代码展示了如何声明一个实例变量：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span> {
	<span style="color:#66d9ef">num</span> x;  <span style="color:#75715e">// 声明了一个实例变量 x，初始化为 null
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">num</span> y; <span style="color:#75715e">// 声明 y，初始化为 null
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">num</span> z <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#75715e">// 声明 z，初始化为 0
</span><span style="color:#75715e"></span>}
</code></pre></div><p>所有的实例变量都会生成一个隐式的 getter 方法，非 final 的实例变量也会生成一个隐式的 setter 方法。</p>
<p>如果在一个实例变量声明的时候就对其进行了初始化，那么它的值会在实例创建的时候设置，在构造函数及其初始化列表执行之前。</p>
<h3 id="heading17">构造函数</h3>
<p>通过创建一个与类名相同的函数声明一个构造函数：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span> {
	<span style="color:#66d9ef">num</span> x, y;
	
	Point(<span style="color:#66d9ef">num</span> x, <span style="color:#66d9ef">num</span> y) {
		<span style="color:#66d9ef">this</span>.x <span style="color:#f92672">=</span> x;
		<span style="color:#66d9ef">this</span>.y <span style="color:#f92672">=</span> y;
	}
}
</code></pre></div><p><code>this</code> 关键字引用了当前实例。</p>
<h4 id="heading18">默认构造函数</h4>
<p>如果没有声明构造函数，Dart 会有一个默认构造函数。默认构造函数没有参数并且会调用父类的无参数构造函数。</p>
<h4 id="heading19">构造函数不能继承</h4>
<p>子类不能继承父类的构造函数，如果子类没有声明构造函数，那么它只有一个默认构造函数。</p>
<h4 id="heading20">命名构造函数</h4>
<p>使用一个命名函数为类实现了多个构造函数：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span> {
	<span style="color:#66d9ef">num</span> x, y;
	
	Point(<span style="color:#66d9ef">this</span>.x, <span style="color:#66d9ef">this</span>.y);	
	Point.origin() {
		x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
		y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
	}
}
</code></pre></div><h4 id="heading21">调用父类的非默认构造函数</h4>
<p>一般地，子类会调用父类的无名字、无参数构造函数，父类的构造函数会在构造函数体的开头被调用。如果使用了初始化列表，它会在父类被调用之前执行。它们的执行顺序如下：</p>
<ol>
<li>初始化列表</li>
<li>父类的无参构造函数</li>
<li>主类的无参构造函数</li>
</ol>
<p>如果父类没有一个无名字、无参数的构造函数，那么必须手动调用父类的一个构造函数。</p>
<h4 id="heading22">初始化列表</h4>
<p>除了调用父类的构造函数，也可以在构造函数体运行之前初始化实例变量。使用逗号分隔初始化程序</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#75715e">// 初始化列表在构造函数体运行之前设置实例变量
</span><span style="color:#75715e"></span>Point.fromjson(Map<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">String</span>, <span style="color:#66d9ef">num</span><span style="color:#f92672">&gt;</span> json)
	<span style="color:#f92672">:</span> x <span style="color:#f92672">=</span> json[<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">x</span><span style="color:#e6db74">&#39;</span>],
	  y <span style="color:#f92672">=</span> json[<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">y</span><span style="color:#e6db74">&#39;</span>] {
	print(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">In Point.fromJson(): (</span><span style="color:#e6db74">$</span>x<span style="color:#e6db74">, </span><span style="color:#e6db74">$</span>y<span style="color:#e6db74">)</span><span style="color:#e6db74">&#39;</span>);	  
}
</code></pre></div><h4 id="heading23">重定向构造函数</h4>
<p>有时候一个构造函数的主要目的是为了重定向到同一个类中的另一个构造函数。重定向构造函数的函数体为空，构造函数调用在冒号 <code>:</code> 后面。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span> {
	<span style="color:#66d9ef">num</span> x, y;
	
	Point(<span style="color:#66d9ef">this</span>.x, <span style="color:#66d9ef">this</span>.y);
	Point.alongXAxis(<span style="color:#66d9ef">num</span> x) <span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>(x, <span style="color:#ae81ff">0</span>);
}
</code></pre></div><h4 id="heading24">常量构造函数</h4>
<p>如果一个类产生的对象永远不会改变，可以使这些对象为编译期常量。定义一个 <code>const</code> 构造函数并且确保所有的实例变量为 <code>final</code>，可以做到如此：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ImmutablePoint</span> {
	<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> ImmutablePoint origin <span style="color:#f92672">=</span> <span style="color:#66d9ef">const</span> ImmutablePoint(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>);
	
	<span style="color:#66d9ef">final</span> <span style="color:#66d9ef">num</span> x, y;
	<span style="color:#66d9ef">const</span> ImmutablePoint(<span style="color:#66d9ef">this</span>.x, <span style="color:#66d9ef">this</span>.y);
}
</code></pre></div><h4 id="heading25">工厂构造函数</h4>
<p>当一个构造函数并不总是创建这个类的一个新实例时，使用 <code>factory</code> 关键字来实现它。一个工厂构造函数可能会返回一个从缓存中的实例，或者返回一个子类的实例。</p>
<p>下面一个从缓存中返回实例的工厂构造函数：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Logger</span> {
	<span style="color:#66d9ef">final</span> <span style="color:#66d9ef">String</span> name;
  <span style="color:#66d9ef">bool</span> mute <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;
  
  <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> Map<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">String</span>, Logger<span style="color:#f92672">&gt;</span> _cache <span style="color:#f92672">=</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">String</span>, Logger<span style="color:#f92672">&gt;</span>{};
  
  <span style="color:#66d9ef">factory</span> Logger(<span style="color:#66d9ef">String</span> name) {
    <span style="color:#66d9ef">return</span> _cache.putIfAbsent{name, ()<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span>Logger._internal(name)};
  }
  
  Logger._internal(<span style="color:#66d9ef">this</span>.name);
}
</code></pre></div><h3 id="heading26">方法</h3>
<h4 id="heading27">实例方法</h4>
<p>一个对象的实例方法可以访问实例变量和 <code>this</code>。</p>
<h4 id="getters--setters">getters 和 setters</h4>
<p>getters 和 Setters 是提供了对一个对象属性读写访问的特殊方法。可以使用 <code>get</code> 和 <code>set</code> 关键字实现 getters 和 setters 来创建额外的属性：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rectangle</span> {
	<span style="color:#66d9ef">num</span> left, top, width, height;
  
  Rectangle(<span style="color:#66d9ef">this</span>.left, <span style="color:#66d9ef">this</span>.top, <span style="color:#66d9ef">this</span>.width, <span style="color:#66d9ef">this</span>.height);
  
  <span style="color:#66d9ef">num</span> <span style="color:#66d9ef">get</span> right <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> left <span style="color:#f92672">+</span> width;
  <span style="color:#66d9ef">set</span> right(<span style="color:#66d9ef">num</span> value) <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> left <span style="color:#f92672">=</span> value <span style="color:#f92672">-</span> width;
  <span style="color:#66d9ef">num</span> <span style="color:#66d9ef">get</span> botom <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> top <span style="color:#f92672">+</span> height;
  <span style="color:#66d9ef">set</span> bottom(<span style="color:#66d9ef">num</span> value) <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> top <span style="color:#f92672">=</span> value <span style="color:#f92672">-</span> height;
}

<span style="color:#66d9ef">void</span> main() {
  <span style="color:#66d9ef">var</span> rect <span style="color:#f92672">=</span> Rectangle(<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">15</span>);
	rect.right <span style="color:#f92672">=</span> <span style="color:#ae81ff">12</span>;
}
</code></pre></div><h4 id="heading28">抽象方法</h4>
<p>实例方法、getter 和 setter 方法可以为抽象的，定义一个接口，但把具体的实现留给其他类。抽象方法只能存在于抽象类中。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Doer</span> {
  <span style="color:#66d9ef">void</span> doSomething();
}

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">EffectiveDoer</span> <span style="color:#66d9ef">extends</span> Doer {
  <span style="color:#66d9ef">void</span> doSomethind() {
    <span style="color:#75715e">// 提供具体的实现
</span><span style="color:#75715e"></span>  }
}
</code></pre></div><h3 id="heading29">抽象类</h3>
<p>使用 <code>abstract</code> 修饰符定义一个抽象类——一个不能被实例化的类。抽象类对于定义接口非常有用，通常会带有一些实现。如果想让抽象类看起来是可以被实例化的，定义一个工厂构造函数。</p>
<h3 id="heading30">隐式接口</h3>
<p>所有的类都隐式地定义了一个接口，包含了这个类所有的实例成员和任何它实现了的接口。如果想创建一个类 A 支持 B 的 API，但是不通过继承 B 来实现，类 A 应该实现 B 的接口。</p>
<p>一个类通过 <code>implements</code> 子句声明接口并且提供接口要求的 API 来实现一个或多个接口：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span> {
	<span style="color:#66d9ef">final</span> _name;

  Person(<span style="color:#66d9ef">this</span>._name);
  
  <span style="color:#66d9ef">String</span> greet(<span style="color:#66d9ef">String</span> who) <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Hello, </span><span style="color:#e6db74">$</span>who<span style="color:#e6db74">. I am </span><span style="color:#e6db74">$</span>_name<span style="color:#e6db74">&#39;</span>;
}

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Impostor</span> <span style="color:#66d9ef">implements</span> Person {
  <span style="color:#66d9ef">get</span> _name <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">&#39;</span>;  
  <span style="color:#66d9ef">String</span> greet(<span style="color:#66d9ef">String</span> who) <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Hi </span><span style="color:#e6db74">$</span>who<span style="color:#e6db74">. Do you knwo who I am?</span><span style="color:#e6db74">&#39;</span>;
}

<span style="color:#66d9ef">String</span> greetBob(Person person) <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> person.greet(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Bob</span><span style="color:#e6db74">&#39;</span>);

<span style="color:#66d9ef">void</span> main() {
  print(greetBob(Person(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Kathy</span><span style="color:#e6db74">&#39;</span>)));
  print(greetBob(Impostor()));
}

</code></pre></div><h3 id="heading31">拓展类</h3>
<p>使用 <code>extends</code> 来创建子类，其 <code>super</code> 引用了父类：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Television</span> {
	<span style="color:#66d9ef">void</span> turnOn() {
		_illuminateDisplay();
    _activateIrSensor();
	}
}

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SmartTelevision</span> <span style="color:#66d9ef">extends</span> Television {
  <span style="color:#66d9ef">void</span> turnOn() {
    <span style="color:#66d9ef">super</span>.turnOn();
    _bootNetworkInterface();
    _initializeMemory();
    _upgradeApps();
  }
}
</code></pre></div><h4 id="heading32">覆写成员</h4>
<p>子类可以覆写实例方法、getter 和 setter，使用 <code>@override</code> 注解来表示覆写一个成员：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SmartTelevision</span> <span style="color:#66d9ef">extends</span> Television {
	<span style="color:#960050;background-color:#1e0010">@</span>override
	<span style="color:#66d9ef">void</span> turnOn() {
	}
}
</code></pre></div><h4 id="nosuchmethod">noSuchMethod()</h4>
<p>当代码试图使用一个不存在的方法或实例变量时，可以通过覆写 <code>noSuchMethod()</code> 方法来查明或作出反应：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">A</span> {
	<span style="color:#960050;background-color:#1e0010">@</span>override
  <span style="color:#66d9ef">void</span> noSuchMethod(Invocation invocation) {
    print(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">tried to use a non-existent memeber : </span><span style="color:#e6db74">${</span>invocation.memberbName<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39;</span>);
  }
}
</code></pre></div><p>不能调用一个未实现的方法，除非下面有一种情况为真：</p>
<ul>
<li>接收方有一个静态类型 <code>dynamic</code>。</li>
<li>接收方有一个静态类型，它定义了这个未实现的方法，并且接收方的动态类型具有 <code>noSuchMethod()</code> 的实现，该实现与来自 <code>Object</code> 的不同。</li>
</ul>
<h3 id="heading33">枚举类型</h3>
<h4 id="heading34">使用枚举</h4>
<p>使用 <code>enum</code> 关键字声明一个枚举类型：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart">enum Color { red, green, blue }
</code></pre></div><p>枚举中的每一个值都有一个 <code>index</code> getter，返回枚举中声明的值的位置，位置从 0 开始。例如，第一个值的 index 为 0，第二个值的 index 为 1。</p>
<p>使用枚举的 <code>values</code> 常量，可以获得一个枚举中所有值的列表：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart">List<span style="color:#f92672">&lt;</span>Color<span style="color:#f92672">&gt;</span> colors <span style="color:#f92672">=</span> Color.valuse;
colors[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">=</span><span style="color:#f92672">=</span> Color.blue;
</code></pre></div><p>枚举类型有以下限制：</p>
<ul>
<li>不能继承、mix in 或实现枚举。</li>
<li>无法显式实例化枚举。</li>
</ul>
<h3 id="mixins">给类添加功能：mixins</h3>
<p>mixins 是一种在多个类层次结构中重用类代码的一种方式。</p>
<p>使用 <code>with</code>  关键字，后面接一个或多个 mixin 名字来使用 mixin。下面是一个两个类使用 mixin 的例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Musician</span> <span style="color:#66d9ef">extends</span> Performer <span style="color:#66d9ef">with</span> Musical {
  <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>}

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Maestro</span> <span style="color:#66d9ef">extends</span> Person <span style="color:#66d9ef">with</span> Musical, Aggressive, Demented {
  <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>}
</code></pre></div><p>为了实现 mixin，创建一个 extend Object 的类并且声明为没有构造函数。除非想 mixin 成为一个 regular class，使用 <code>mixin</code> 关键字代替 <code>class</code>：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart">mixin Musical {
  <span style="color:#66d9ef">bool</span> canPalyPiano <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;
  <span style="color:#66d9ef">bool</span> canCompose <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;
}
</code></pre></div><p>为了指定只有确定的类才能使用该 mixin，用  <code>on</code> 来制定要求的父类：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart">mixin MusicalPerformer on Musician {
	<span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>}
</code></pre></div><h3 id="heading35">类变量和方法</h3>
<p>使用 <code>static</code> 关键字实现类范围的变量和方法。</p>
<h4 id="heading36">静态变量</h4>
<p>静态变量对于类范围的状态和常量很有用：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Queue</span> {
	<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">const</span> initialCapacity <span style="color:#f92672">=</span> <span style="color:#ae81ff">16</span>;
}
</code></pre></div><p>静态变量直到使用的时候才被初始化。</p>
<h4 id="heading37">静态方法</h4>
<p>静态方法不在一个实例上进行操作，因此也不能访问 <code>this</code>。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span> {
  <span style="color:#66d9ef">num</span> x, y;
  Point(<span style="color:#66d9ef">this</span>.x, <span style="color:#66d9ef">this</span>.y);
  
  <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">num</span> distanceBetween(Point a, Point b) {
    <span style="color:#66d9ef">var</span> dx <span style="color:#f92672">=</span> a.x <span style="color:#f92672">-</span> b.x;
    <span style="color:#66d9ef">var</span> dy <span style="color:#f92672">=</span> a.y <span style="color:#f92672">-</span> b.y;
    <span style="color:#66d9ef">return</span> sqrt(dx <span style="color:#f92672">*</span> dx <span style="color:#f92672">+</span> dy <span style="color:#f92672">*</span> dy);
  }
}
</code></pre></div><h2 id="heading38">泛型</h2>

                        </div>

                        
<div class="post-archive">
    <ul class="post-copyright">
        <li><strong>原文作者：</strong><a rel="author" href="http://superchun.cn">悉达多</a></li>
        <li style="word-break:break-all"><strong>原文链接：</strong><a href="http://superchun.cn/posts/Dart%E4%BD%BF%E7%94%A8/">http://superchun.cn/posts/Dart%E4%BD%BF%E7%94%A8/</a></li>
        <li><strong>版权声明：</strong>本作品采用<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可，非商业转载请注明出处（作者，原文链接），商业转载请联系作者获得授权。</li>
    </ul>
</div>
<br/>



                        


                        <div class="post-meta meta-tags">
                            
                            <ul class="clearfix">
                                
                                <li><a href="http://superchun.cn/tags/Dart">Dart</a></li>
                                
                                <li><a href="http://superchun.cn/tags/Flutter">Flutter</a></li>
                                
                            </ul>
                            
                        </div>
                    </article>
                    
    

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "superchun/blogcomment"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    
                </div>
            </div>
            <div id="secondary">
    <section class="widget">
        <form id="search" action="/search/" method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="http://superchun.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="http://superchun.cn/posts/Dart%E4%BD%BF%E7%94%A8/" title="Dart使用">Dart使用</a>
    </li>
    
    <li>
        <a href="http://superchun.cn/posts/%E5%85%B3%E4%BA%8EGithub%E8%AE%BF%E9%97%AE%E6%85%A2%E5%8F%8A%E4%BF%AE%E6%94%B9%E6%BA%90%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B/" title="关于Github访问慢及修改源的那些事">关于Github访问慢及修改源的那些事</a>
    </li>
    
    <li>
        <a href="http://superchun.cn/posts/%E4%BB%8EHeapsort%E4%B8%8EMergesort%E7%9C%8B%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" title="从Heapsort与Mergesort看排序算法">从Heapsort与Mergesort看排序算法</a>
    </li>
    
    <li>
        <a href="http://superchun.cn/posts/git%E4%BD%BF%E7%94%A8SSH%E9%85%8D%E7%BD%AE%E4%B8%80%E7%9B%B4%E9%9C%80%E8%A6%81%E8%BE%93%E5%85%A5%E5%AF%86%E7%A0%81%E7%9A%84%E5%9D%91/" title="git使用SSH配置一直需要输入密码的坑">git使用SSH配置一直需要输入密码的坑</a>
    </li>
    
    <li>
        <a href="http://superchun.cn/posts/Mac%E5%BF%AB%E6%8D%B7%E9%94%AE/" title="Mac快捷键">Mac快捷键</a>
    </li>
    
    <li>
        <a href="http://superchun.cn/posts/What-s-New-in-Xcode11/" title="What&#39;s New in Xcode11">What&#39;s New in Xcode11</a>
    </li>
    
    <li>
        <a href="http://superchun.cn/posts/Cordova-in-iOS/" title="Cordova in iOS">Cordova in iOS</a>
    </li>
    
    <li>
        <a href="http://superchun.cn/posts/iOS%E4%BA%8B%E4%BB%B6%E6%8B%A6%E6%88%AA/" title="iOS 事件拦截">iOS 事件拦截</a>
    </li>
    
    <li>
        <a href="http://superchun.cn/posts/OpenGL-ES%E6%95%99%E7%A8%8B%E4%B8%80-%E7%AE%80%E5%8D%95%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6-/" title="OpenGL实战(一) - 简单图形绘制">OpenGL实战(一) - 简单图形绘制</a>
    </li>
    
    <li>
        <a href="http://superchun.cn/posts/%E5%88%9D%E8%AF%86OpenGL-ES/" title="初识 OpenGL ES">初识 OpenGL ES</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">分类</h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title">标签</h3>
<div class="tagcloud">
    
    <a href="http://superchun.cn/tags/Cordova/">Cordova</a>
    
    <a href="http://superchun.cn/tags/Dart/">Dart</a>
    
    <a href="http://superchun.cn/tags/Flutter/">Flutter</a>
    
    <a href="http://superchun.cn/tags/OpenGL-ES/">OpenGL ES</a>
    
    <a href="http://superchun.cn/tags/git-ssh/">git ssh</a>
    
    <a href="http://superchun.cn/tags/iOS/">iOS</a>
    
    <a href="http://superchun.cn/tags/%E4%BA%8B%E4%BB%B6%E6%8B%A6%E6%88%AA/">事件拦截</a>
    
    <a href="http://superchun.cn/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a>
    
    <a href="http://superchun.cn/tags/%E6%9D%82%E8%B0%88%E4%BD%8E%E8%AF%AD/">杂谈低语</a>
    
    <a href="http://superchun.cn/tags/%E7%AE%97%E6%B3%95/">算法</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="http://superchun.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
        </div>
    </div>
</div>
<footer id="footer">
    <div class="container">
        &copy; 2019 <a href="http://superchun.cn">悉达多｜PainMaker By 悉达多</a>. Powered by <a rel="nofollow noreferer noopener" href="https://gohugo.io" target="_blank">Hugo</a>.
        <a href="https://www.flysnow.org/" target="_blank">Theme</a> based on <a href="https://github.com/rujews/maupassant-hugo" target="_blank">maupassant</a>. 
    </div>
</footer>


<script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.13.0/flowchart.min.js" crossorigin="anonymous"></script>
<script>
    {
        {
            -
            if .Params.flowchartDiagrams.options -
        }
    }
    window.flowchartDiagramsOptions = {
        {.Params.flowchartDiagrams.options | safeJS
        }
    }; {
        {
            -
            else if .Site.Params.flowchartDiagrams.options -
        }
    }
    window.flowchartDiagramsOptions = {
        {.Site.Params.flowchartDiagrams.options | safeJS
        }
    }; {
        {
            -end -
        }
    }
    (function() {
        if (!window.flowchart) return;
        const blocks = document.querySelectorAll('pre code.language-flowchart, pre code.language-flow');
        for (let i = 0; i < blocks.length; i++) {
            const block = blocks[i];
            const rootElement = block.parentNode;
            const container = document.createElement('div');
            const id = `js-flowchart-diagrams-${i}`;
            container.id = id;
            container.className = 'align-center';
            container.setAttribute("style", "overFlow-x:auto");
            rootElement.parentNode.replaceChild(container, rootElement);
            const diagram = flowchart.parse(block.childNodes[0].nodeValue);
            diagram.drawSVG(id, window.flowchartDiagramsOptions ? window.flowchartDiagramsOptions : {});
        }
    })();
</script>
<script type="text/javascript">
    
    (function() {
        $("pre code").parent().addClass("line-numbers")
    }());

    window.MathJax = {
        tex2jax: {
            inlineMath: [
                ['$', '$']
            ],
            processEscapes: true
        }
    };
</script>

<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>


<a id="rocket" href="#top"></a>
<script type="text/javascript" src="/%20js/totop.js?v=0.0.0%20" async=""></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-153875253-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
 
<script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




<script type="text/javascript">
(function(){
	if (typeof self === 'undefined' || !self.Prism || !self.document) {
		return;
	}

	if (!Prism.plugins.toolbar) {
		console.warn('Copy to Clipboard plugin loaded before Toolbar plugin.');

		return;
	}

	var ClipboardJS = window.ClipboardJS || undefined;

	if (!ClipboardJS && typeof require === 'function') {
		ClipboardJS = require('clipboard');
	}

	var callbacks = [];

	if (!ClipboardJS) {
		var script = document.createElement('script');
		var head = document.querySelector('head');

		script.onload = function() {
			ClipboardJS = window.ClipboardJS;

			if (ClipboardJS) {
				while (callbacks.length) {
					callbacks.pop()();
				}
			}
		};

		script.src = 'https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js';
		head.appendChild(script);
	}

	Prism.plugins.toolbar.registerButton('copy-to-clipboard', function (env) {
		var linkCopy = document.createElement('button');
		linkCopy.textContent = '复制代码';

		if (!ClipboardJS) {
			callbacks.push(registerClipboard);
		} else {
			registerClipboard();
		}

		return linkCopy;

		function registerClipboard() {
			var clip = new ClipboardJS(linkCopy, {
				'text': function () {
					return env.code;
				}
			});

			clip.on('success', function() {
				linkCopy.textContent = '复制成功!';

				resetText();
			});
			clip.on('error', function () {
				linkCopy.textContent = '按 Ctrl+C 复制';

				resetText();
			});
		}

		function resetText() {
			setTimeout(function () {
				linkCopy.textContent = '复制代码';
			}, 5000);
		}
	});
})();

</script>
</body>
</html>
